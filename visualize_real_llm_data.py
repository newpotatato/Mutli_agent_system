#!/usr/bin/env python3
"""
üìä –°–û–ó–î–ê–ù–ò–ï –ì–†–ê–§–ò–ö–û–í –ù–ê –û–°–ù–û–í–ï –†–ï–ê–õ–¨–ù–´–• –î–ê–ù–ù–´–• LLM

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç
—Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö LLM –∞–≥–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
    python visualize_real_llm_data.py

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω:
    python run_real_llm_test.py
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
sys.path.append(os.path.dirname(__file__))

from src.visualization.real_llm_visualization import RealLLMVisualization


def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤"""
    print("üìä –°–û–ó–î–ê–ù–ò–ï –ì–†–ê–§–ò–ö–û–í –†–ï–ê–õ–¨–ù–´–• LLM –î–ê–ù–ù–´–•")
    print("=" * 60)
    print("üéØ –¶–µ–ª—å: –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∞–≥–µ–Ω—Ç—ã")
    print("üìã –ò—Å—Ç–æ—á–Ω–∏–∫: –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á")
    print("=" * 60)
    
    try:
        # –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
        print("\nüîç –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...")
        visualizer = RealLLMVisualization()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
        if not visualizer.successful_tasks:
            print("\n‚ùå –ù–ï–¢ –î–ê–ù–ù–´–• –î–õ–Ø –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò!")
            print("–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:")
            print("  1. –ù–µ –∑–∞–ø—É—â–µ–Ω —Ç–µ—Å—Ç: python run_real_llm_test.py")
            print("  2. –í—Å–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–∞–º–∏")
            print("  3. –§–∞–π–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω")
            print("\n–†–µ—à–µ–Ω–∏–µ:")
            print("  –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python run_real_llm_test.py")
            return False
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—Ä–∞—Ç–∫—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        agents = visualizer.get_active_agents()
        task_types = visualizer.get_task_types()
        
        print(f"\nüìà –ù–ê–ô–î–ï–ù–´ –î–ê–ù–ù–´–ï:")
        print(f"   ‚Ä¢ –£—Å–ø–µ—à–Ω—ã—Ö –∑–∞–¥–∞—á: {len(visualizer.successful_tasks)}")
        print(f"   ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤: {len(agents)}")
        print(f"   ‚Ä¢ –¢–∏–ø–æ–≤ –∑–∞–¥–∞—á: {len(task_types)}")
        print(f"   ‚Ä¢ –ê–≥–µ–Ω—Ç—ã: {', '.join(agents)}")
        print(f"   ‚Ä¢ –ó–∞–¥–∞—á–∏: {', '.join(task_types)}")
        
        # –°–æ–∑–¥–∞–µ–º –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏
        print(f"\nüé® –°–û–ó–î–ê–ù–ò–ï –ì–†–ê–§–ò–ö–û–í...")
        print("-" * 40)
        
        success = visualizer.create_all_real_graphs()
        
        if success:
            print("\nüéâ –í–°–ï –ì–†–ê–§–ò–ö–ò –°–û–ó–î–ê–ù–´ –£–°–ü–ï–®–ù–û!")
            print(f"üìÅ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {visualizer.output_dir}/")
            print("\nüîç –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ì–†–ê–§–ò–ö–û–í:")
            print("  ‚úì –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∞–≥–µ–Ω—Ç—ã")
            print("  ‚úì –û—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö LLM")
            print("  ‚úì –û—Ç—Ä–∞–∂–∞—é—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –∏ –≤—Ä–µ–º—è")
            print("  ‚úì –ò—Å–∫–ª—é—á–∞—é—Ç —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ")
            return True
        else:
            print("\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤")
            return False
        
    except FileNotFoundError:
        print("\n‚ùå –§–ê–ô–õ –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –ù–ï –ù–ê–ô–î–ï–ù!")
        print("–°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:")
        print("  python run_real_llm_test.py")
        return False
        
    except Exception as e:
        print(f"\n‚ùå –û–®–ò–ë–ö–ê: {str(e)}")
        import traceback
        traceback.print_exc()
        return False


def show_help():
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É"""
    print("""
üìö –°–ü–†–ê–í–ö–ê –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö LLM –∞–≥–µ–Ω—Ç–æ–≤.

–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –î–ï–ô–°–¢–í–ò–ô:
1. python run_real_llm_test.py     # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ LLM
2. python visualize_real_llm_data.py  # –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤

–°–û–ó–î–ê–í–ê–ï–ú–´–ï –ì–†–ê–§–ò–ö–ò:
‚Ä¢ real_agent_performance_heatmap.png - –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚Ä¢ real_execution_times.png - –†–µ–∞–ª—å–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚Ä¢ real_task_distribution.png - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ –∞–≥–µ–Ω—Ç–∞–º
‚Ä¢ real_cost_analysis.png - –ê–Ω–∞–ª–∏–∑ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
‚Ä¢ real_llm_summary_report.json - –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç

–û–°–û–ë–ï–ù–ù–û–°–¢–ò:
‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ LLM –∞–≥–µ–Ω—Ç—ã
‚Ä¢ –ò—Å–∫–ª—é—á–∞—é—Ç –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –∏–ª–∏ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚Ä¢ –û—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–∞—Ö –∏ –º–µ—Ç—Ä–∏–∫–∞—Ö LLM
‚Ä¢ –û—Ç—Ä–∞–∂–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–´:
‚Ä¢ python run_complete_real_llm_analysis.py  # –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª (—Ç–µ—Å—Ç + –≥—Ä–∞—Ñ–∏–∫–∏)
""")


if __name__ == "__main__":
    if len(sys.argv) > 1 and sys.argv[1] in ['--help', '-h', 'help']:
        show_help()
        sys.exit(0)
    
    print("üìä –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –†–ï–ê–õ–¨–ù–´–• –î–ê–ù–ù–´–• LLM")
    print("=" * 50)
    
    success = main()
    
    if success:
        print("\n‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")
        print("üîç –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ LLM –∞–≥–µ–Ω—Ç–æ–≤.")
    else:
        print("\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏")
        print("üí° –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å --help –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏")
        sys.exit(1)
